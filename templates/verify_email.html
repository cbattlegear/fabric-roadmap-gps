{% extends 'base.html' %}
{% block title %}Email Verification - Fabric GPS{% endblock %}
{% block extra_head %}
<style>
    .verification-container {
        max-width: 600px;
        margin: 2rem auto;
        padding: var(--spacing-xl);
        background: white;
        border-radius: 12px;
        box-shadow: var(--elevation-2);
        text-align: center;
    }
    .success-icon,.error-icon,.pending-icon {
        font-size: 4rem;
        margin-bottom: var(--spacing-l);
    }
    .success-message { color: var(--fabric-semantic-success); }
    .error-message { color: var(--fabric-semantic-error); }
</style>
{% endblock %}

{% block content %}
<div class="verification-container">
    {% if pending %}
        <div class="pending-icon">✉️</div>
        <h1 style="margin-top:0;">Confirm Your Subscription</h1>
        <p>Click the button below to verify your email and activate weekly updates every Monday.</p>
        <form method="POST" style="margin-top:var(--spacing-l);">
          <input type="hidden" name="token" value="{{ token }}">
          <button type="submit" class="button button-primary">Verify Email</button>
        </form>
        <p style="margin-top:var(--spacing-l);font-size:.85rem;color:var(--fabric-neutral-grey-90);">Link valid for 24 hours. This page does nothing until you press Verify.</p>
    {% elif success %}
        <div class="success-icon">✅</div>
        <h1 class="success-message">Email Verified!</h1>
        <p>You will now receive weekly Microsoft Fabric roadmap change summaries.</p>
        <a href="/" class="button button-primary" style="margin-top:var(--spacing-l);">Back to Home</a>
    {% elif error %}
        <div class="error-icon">❌</div>
        <h1 class="error-message">Verification Failed</h1>
        <p>{{ error }}</p>
        <a href="/" class="button button-primary" style="margin-top:var(--spacing-l);">Back to Home</a>
    {% else %}
        <div class="error-icon">❓</div>
        <h1 class="error-message">Invalid Request</h1>
        <p>No verification token provided.</p>
        <a href="/" class="button button-primary" style="margin-top:var(--spacing-l);">Back to Home</a>
    {% endif %}
</div>
{% endblock %}
